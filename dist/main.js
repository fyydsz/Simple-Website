(()=>{"use strict";const e=(new Date).toISOString().slice(0,10);console.log(e);const t=document.getElementById("message-input"),n=document.getElementById("message-status");let o=0;document.getElementById("play-music-btn").addEventListener("click",(function(){document.getElementById("music-player").classList.add("show"),document.querySelector("audio").play()})),t.addEventListener("keydown",(async function(s){if("Enter"===s.key){if(t.disabled)return;const s=Date.now();if(s-o<2e3)return n.textContent="You are sending messages too quickly!",setTimeout((function(){n.textContent=""}),2e3),o=s,t.disabled=!0,void setTimeout((function(){n.textContent="",t.disabled=!1}),2e3);if(""===t.value.trim())return n.textContent="Please enter a message!",setTimeout((function(){n.textContent=""}),2e3),o=s,t.disabled=!0,void setTimeout((function(){n.textContent="",t.disabled=!1}),2e3);console.log("User typed: "+t.value),n.textContent="Sending message...";try{const n=await fetch("/api/input",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t.value,date:e})}),o=await n.json();console.log(o)}catch(e){console.error(e)}n.textContent="Your message successfully sent anonymously!",t.value="",o=s,t.disabled=!0,setTimeout((function(){n.textContent="",t.disabled=!1}),3e3)}}))})();